#
#   ansible/Ubutu-Initialize.yaml
#
#   David Janes
#   Consensas
#   2018-12-22
#

- name: Ubuntu Initialize
  hosts: "{{ in_hosts }}"
  become: true
  become_user: root

  tasks:
  - name: Ping
    ping:

  - name: Install Standard Packages
    become: yes
    apt:
      pkg:
      - curl
      - vim
    
  - name: Install the gpg key for nodejs LTS
    become: yes
    apt_key:
      url: "https://deb.nodesource.com/gpgkey/nodesource.gpg.key"
      state: present

  - name: Install the nodejs LTS repos
    become: yes
    apt_repository:
      repo: "deb https://deb.nodesource.com/node_14.x {{ ansible_distribution_release }} main"
      state: present
      update_cache: yes

  - name: Install the nodejs
    become: yes
    apt:
      name: nodejs
      state: latest
